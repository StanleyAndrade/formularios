<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMTPJS Tech SOS</title>
    <script src="https://smtpjs.com/v3/smtp.js"></script>
</head>

<body>
    <form id="submit" action="#" name="form-contact" method="post" enctype="multipart/form-data">
        <input type="text" id="name" placeholder="Nome completo" required><br>
        <input type="text" id="whatsapp" placeholder="Whatsapp (DDD) 00000-0000" required><br>
        <input type="email" id="email" placeholder="Email" required><br>
        <input type="text" id="nome_empresa" placeholder="Nome da empresa" required><br>
        <br><br>
        
        <label for="cargo" >Cargo</label> <br>
       <select id="cargo">
        <option>Proprietário</option>
        <option>Presidente ou CEO</option>
        <option>Vice-presidente ou C-Level</option>
        <option>Diretor</option>
        <option>Gerente</option>
        <option>Coordenador</option>
        <option>Supervisor</option>
        <option>Analista</option>
       </select>
       <br><br>

       <label for="faturamento" >Faixa de Faturamento</label> <br>
       <select id="faturamento">
        <option>Ainda não faturamos</option>
        <option>Até R$2 mil por mês</option>
        <option>Até R$6 mil por mês</option>
        <option>Até R$12 mil por mês</option>
        <option>Até R$30 mil por mês</option>
        <option>De R$30 mil a R$100 mil por mês</option>
        <option>De R$100 mil a R$500 mil por mês</option>
        <option>De R$500 mil a 1 milhão por mês</option>
        <option>De 1 milhão a 50 milhões por mês</option>
        <option>Acima de 50 milhões por mês</option>
       </select>
       <br><br>

       <label for="serviçodesejado" >O que você deseja?</label> <br>
       <select id="serviçodesejado">
        <option>Plataforma EAD</option>
        <option>Site Institucional</option>
        <option>E-commerce</option>
        <option>Página de venda</option>
        <option>Página de Captura</option>
        <option>Quero que crie algo novo para a minha empresa</option>
       </select>
       <br><br>

       <input type="submit" value="Enviar" id="submit" onclick="">
    </form>
    <script src="./index.js"></script>
</body>
</html>

<script>
//Cria variáveis que recebem os valores dos inputs para enviar por EMAIL
const name = document.getElementById('name');
const whatsapp = document.getElementById('whatsapp');
const email = document.getElementById('email');
const nome_empresa = document.getElementById('nome_empresa');
const datadehoje = document.getElementById('data');
const cargo = document.getElementById('cargo');
const faturamento = document.getElementById('faturamento');
const serviçodesejado = document.getElementById('serviçodesejado');
const submit = document.getElementById('submit');

//Cria variáveis que recebem os valores dos inputs para enviar pelo WHATSAPP
const nameZAP = document.getElementById('name');
const whatsappZAP = document.getElementById('whatsapp');
const emailZAP = document.getElementById('email');
const nome_empresaZAP = document.getElementById('nome_empresa');
const datadehojeZAP = document.getElementById('data');
const cargoZAP = document.getElementById('cargo');
const faturamentoZAP = document.getElementById('faturamento');
const serviçodesejadoZAP = document.getElementById('serviçodesejado');
const submitZAP = document.getElementById('submit');

//Pega dia e hora e coloca na variável dataAtual
const data = new Date()
const dia = String(data.getDate()).padStart(2, '0') //trasforma 1 em 01
const mes = String(data.getMonth() + 1).padStart(2, '0') //trasforma 1 em 01
const ano = data.getFullYear() // 2023
const hora = String(data.getHours()).padStart(2, '0') //trasforma 1 em 01
const minuto = String(data.getMinutes()).padStart(2, '0') //trasforma 1 em 01
const segundo = String(data.getSeconds()).padStart(2, '0') //trasforma 1 em 01
const dataAtual = `Enviado em ${dia}/${mes}/${ano} às ${hora}:${minuto}:${segundo}`

//Função + corpo do Whatsapp com tudo que será enviado para o Whatsapp

function enviarProZap(){
    //Nomes pré estabalecidos
    var zap = "https://wa.me/5521992002356?text=";
    var textoZAP = `
*Nome do cliente:* ${nameZAP.value} \n
*Whatsapp do cliente:* ${whatsappZAP.value} \n
*Email do cliente:* ${emailZAP.value} \n
*Nome da Empresa:* ${nome_empresaZAP.value} \n
*Cargo do cliente:* ${cargoZAP.value} \n
*Faturamento da empresa do cliente:* ${faturamentoZAP.value} \n
*Serviço que o cliente deseja:* ${serviçodesejadoZAP.value} \n
${dataAtual}
`;

//Transforma em texto de Whatsapp
textoZAP = window.encodeURIComponent(textoZAP);

//Concatena e exibe
var codigoTodo = zap + textoZAP;
window.open(codigoTodo, '_self')

}



//corpo do email com tudo que será enviado para o Email
submit.addEventListener('submit',(e)=>{
    e.preventDefault();
    let ebody = `
    <div><img src="https://techsos.com.br/wp-content/uploads/2022/11/Logo-simples-e1669332330842.png" width="100%"></div>
    <br><br>
    <h3 style="margin: 0%;">Nome do cliente:</h3>${name.value}
    <br><br>
    <h3 style="margin: 0%;">Whatsapp do cliente:</h3>${whatsapp.value}
    <br><br>
    <h3 style="margin: 0%;">Email do cliente: </h3>${email.value}
    <br><br>
    <h3 style="margin: 0%;">Nome da Empresa: </h3>${nome_empresa.value}
    <br><br>
    <h3 style="margin: 0%;">Cargo do cliente: </h3>${cargo.value}
    <br><br>
    <h3 style="margin: 0%;">Faturamento da empresa do cliente: </h3>${faturamento.value}
    <br><br>
    <h3 style="margin: 0%;">Serviço que o cliente deseja: </h3>${serviçodesejado.value}
    <br><br>
    ${dataAtual} 
    `;

    Email.send({
        SecureToken : "bfc80bff-ca40-4c07-9fc4-4adabcd444bf", //add your token here
        To : 'techsos.contato@gmail.com', //pode colocar email.value e será enviado pro email ou colocar o email digitado mas ficará fixo
        From : "stanleyandrade95@gmail.com", //email que enviará a mensagem para o usuário
        Subject : "Potencial Cliente",
        Body : ebody
    }).then(
      //é possível colocar o que quiser, e será feito após o submit
      //message => alert(message),
      enviarProZap()
      //window.open('https://techsos.com.br/?page_id=185', '_self') 
    )
});
</script>

<!--COMEÇO DO CSS-->
<style type="text/css">
    input {
        align-content: center;
        align-items: center;
        width: 40%;
        padding: 5px;
        border-radius: 10px;
        margin: 5px;
    }

    select{
        align-content: center;
        align-items: center;
        width: 40%;
    }

    body{
        align-items: center;
        text-align: center;
        color: white
    }

    @media screen and (max-width: 700px){
        input {
            width: 90%;
        }

        select{
        width: 90%;
        }
    }
</style>
